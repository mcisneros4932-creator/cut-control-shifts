<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Oilfield Cut ‚Äî Master Plan</title>
  <meta name="theme-color" content="#0b0f18" />
  <link rel="manifest" href="./manifest.json">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  <style>
    :root{
      --bg:#0b0f18;
      --panel:#111827;
      --panel2:#0f1626;
      --stroke:rgba(255,255,255,.08);
      --text:#e5e7eb;
      --muted:#9ca3af;
      --blue:#7dd3fc;
      --blue2:#38bdf8;
      --pill:#0d1628;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Display","SF Pro Text", Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 50% -10%, rgba(56,189,248,.16), transparent 60%),
                  radial-gradient(900px 600px at 20% 10%, rgba(125,211,252,.10), transparent 55%),
                  var(--bg);
      color:var(--text);
      -webkit-font-smoothing: antialiased;
      padding: 18px 16px 48px;
      max-width: 820px;
      margin: 0 auto;
    }
    .title{
      display:flex; align-items:center; gap:12px;
      font-size: 48px;
      line-height:1.02;
      font-weight: 800;
      letter-spacing:-.02em;
      margin: 8px 2px 18px;
      color: var(--blue);
      text-shadow: 0 0 18px rgba(56,189,248,.18);
    }
    .title .emoji{font-size:42px; filter: drop-shadow(0 8px 18px rgba(0,0,0,.45));}
    .subtitleWrap{display:flex; flex-direction:column; gap:10px; margin: 0 2px 16px;}
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding: 14px 16px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      color: var(--muted);
      font-weight: 650;
      font-size: 20px;
      width: fit-content;
      max-width: 100%;
    }
    .pill strong{color: var(--text); font-weight: 800}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
      margin: 14px 0;
    }
    .modeRow{
      display:flex; align-items:flex-start; justify-content:space-between; gap: 14px;
      flex-wrap: wrap;
    }
    .modeLeft{min-width: 260px; flex: 1;}
    .modeLabel{font-size: 40px; font-weight: 900; letter-spacing:-.02em; margin: 2px 0 10px;}
    select{
      background: rgba(0,0,0,.15);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      padding: 14px 16px;
      color: var(--text);
      font-weight: 750;
      font-size: 18px;
      outline: none;
      min-width: 220px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
    }
    button{
      background: rgba(0,0,0,.14);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      color: var(--text);
      font-weight: 800;
      font-size: 18px;
      padding: 14px 18px;
      cursor:pointer;
      box-shadow: var(--shadow);
    }
    button:active{transform: translateY(1px)}
    .modeHelp{
      color: var(--muted);
      font-size: 22px;
      line-height:1.35;
      margin-top: 10px;
      max-width: 560px;
    }
    .sectionTitle{
      display:flex; align-items:center; gap:12px;
      font-size: 56px;
      font-weight: 900;
      letter-spacing:-.03em;
      margin: 10px 0 8px;
      color: var(--blue);
      text-shadow: 0 0 18px rgba(56,189,248,.14);
    }
    .block h3{
      margin: 2px 0 10px;
      font-size: 28px;
      font-weight: 900;
      letter-spacing:-.01em;
    }
    .h4{
      margin: 14px 0 6px;
      font-size: 26px;
      font-weight: 900;
      display:flex; align-items:center; gap:10px;
    }
    ul{
      margin: 6px 0 0 0;
      padding-left: 0;
      list-style: none;
    }
    li{
      display:flex; align-items:flex-start; gap: 12px;
      padding: 10px 0;
      border-top: 1px solid rgba(255,255,255,.06);
      font-size: 22px;
      color: var(--text);
    }
    li:first-child{border-top: none;}
    .macroLine{
      font-size: 24px;
      color: var(--text);
      margin-top: 6px;
      opacity:.95;
    }
    .macroLine .dot{opacity:.45; padding: 0 10px}
    .muted{color: var(--muted)}
    .check{
      width: 28px; height: 28px; margin-top: 2px;
      border-radius: 8px;
      border: 2px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.12);
      display:inline-flex; align-items:center; justify-content:center;
      flex: 0 0 28px;
      cursor:pointer;
    }
    .check[data-checked="true"]{
      border-color: rgba(125,211,252,.75);
      background: rgba(56,189,248,.18);
      box-shadow: 0 0 0 3px rgba(56,189,248,.12);
    }
    .check svg{opacity:0}
    .check[data-checked="true"] svg{opacity:1}
    .footerNote{
      margin-top: 20px;
      color: var(--muted);
      font-size: 16px;
      opacity: .85;
      text-align:center;
    }
    @media (max-width:520px){
      .title{font-size: 44px}
      .sectionTitle{font-size: 52px}
      .modeLabel{font-size: 36px}
      li{font-size: 21px}
    }
  </style>
</head>
<body>
  <div class="title"><span class="emoji">üï∞Ô∏è</span><span>Oilfield Cut<br/>Master Plan</span></div>

  <div class="subtitleWrap">
    <div class="pill" id="shiftPill">Day: <strong id="shiftHours">‚Äî</strong></div>
    <div class="pill" id="targetPill">Targets: <strong id="targetsText">‚Äî</strong></div>
    <div class="pill">Today: <strong id="todayText">‚Äî</strong></div>
  </div>

  <div class="card">
    <div class="modeRow">
      <div class="modeLeft">
        <div class="modeLabel">Mode</div>
        <select id="modeSelect" aria-label="Mode">
          <option value="dayshift">Dayshift</option>
          <option value="nightshift">Nightshift</option>
          <option value="offday">Off Day</option>
        </select>
        <div class="modeHelp" id="modeHelp">
          Dayshift / Nightshift show pre-workout + post-workout blocks. Off Day removes stim/pump stack and lowers calories while keeping protein high.
        </div>
      </div>
      <button id="resetBtn">Reset<br/>today</button>
    </div>
  </div>

  <div id="planRoot"></div>

  <div class="footerNote">PWA: Add to Home Screen ‚Ä¢ Your checks save automatically per day + mode.</div>

<script>
const PLANS = {
  dayshift: {
    label: "Dayshift",
    hours: "3:45 AM ‚Üí 8:45 PM",
    targets: { kcal: 1990, p: 215, c: 170, f: 50 },
    blocks: [
      {
        time: "3:45 AM",
        title: "Wake",
        macros: "Protein 25 g ‚Ä¢ Carbs 40 g ‚Ä¢ Fat 2 g (~280 kcal)",
        food: ["ISO100 whey (1 scoop)", "Banana"],
        supps: ["B-Complex", "Glucosamine", "Glutathione", "LMNT ¬Ω pack", "Vascepa 2 g"]
      },
      {
        time: "7:30 AM",
        title: "Meal 2",
        macros: "Protein 45 g ‚Ä¢ Carbs 35 g ‚Ä¢ Fat 10 g (~420 kcal)",
        food: ["6‚Äì7 oz chicken breast", "100‚Äì120 g cooked rice", "Veggies / greens"],
        supps: ["Vitamin D3 + K2"]
      },
      {
        time: "12:00 PM",
        title: "Meal 3",
        macros: "Protein 45 g ‚Ä¢ Carbs 35 g ‚Ä¢ Fat 10 g (~420 kcal)",
        food: ["96/4 beef (6‚Äì7 oz) OR chicken", "Rice/potato portion", "Greens"],
        supps: []
      },
      {
        time: "5:30 PM",
        title: "Pre-Workout Meal",
        macros: "Protein 30 g ‚Ä¢ Carbs 35 g ‚Ä¢ Fat 5 g (~300 kcal)",
        food: ["ISO100 (1 scoop)", "Rice cakes OR cream of rice"],
        supps: ["Pre-workout (150‚Äì250 mg caffeine)", "L-Theanine 200 mg", "Creatine 5 g", "L-Carnitine 500 mg", "Nitric Oxide (6‚Äì8 g citrulline eq.)"]
      },
      {
        time: "6:30‚Äì8:00 PM",
        title: "Training",
        macros: "Hydrate ‚Ä¢ Optional LMNT if heavy sweat",
        food: ["Water"],
        supps: ["(Optional) LMNT ¬Ω pack"]
      },
      {
        time: "8:15 PM",
        title: "Post Workout",
        macros: "Protein 45 g ‚Ä¢ Carbs 30 g ‚Ä¢ Fat 5 g (~350 kcal)",
        food: ["7 oz chicken/cod", "Rice portion"],
        supps: []
      },
      {
        time: "8:45 PM",
        title: "Wind Down",
        macros: "Sleep 8:45 PM",
        food: [],
        supps: ["Magnesium bisglycinate", "Glycine (optional)"]
      }
    ]
  },

  nightshift: {
    label: "Nightshift",
    hours: "1:00 PM ‚Üí 7:00 AM",
    targets: { kcal: 1990, p: 215, c: 170, f: 50 },
    blocks: [
      {
        time: "1:00 PM",
        title: "Wake",
        macros: "Protein 25 g ‚Ä¢ Carbs 40 g ‚Ä¢ Fat 2 g (~280 kcal)",
        food: ["ISO100 whey (1 scoop)", "Banana"],
        supps: ["Pre-workout (150‚Äì300 mg caffeine)", "L-Theanine 200 mg", "Creatine 5 g", "L-Carnitine 500 mg", "Nitric Oxide (6‚Äì8 g citrulline eq.)", "LMNT ¬Ω pack", "Vascepa 2 g"]
      },
      {
        time: "2:00‚Äì3:15 PM",
        title: "Training",
        macros: "Lift ‚Ä¢ Hydrate",
        food: ["Water"],
        supps: ["(Optional) LMNT ¬Ω pack"]
      },
      {
        time: "3:30 PM",
        title: "Post Workout",
        macros: "Protein 45 g ‚Ä¢ Carbs 45 g ‚Ä¢ Fat 6 g (~430 kcal)",
        food: ["Lean protein (7‚Äì8 oz)", "Rice portion", "Veggies"],
        supps: []
      },
      {
        time: "7:00 PM",
        title: "Meal 2",
        macros: "Protein 45 g ‚Ä¢ Carbs 35 g ‚Ä¢ Fat 12 g (~440 kcal)",
        food: ["Chicken/cod OR 96/4 beef", "Carb portion", "Greens"],
        supps: ["Vitamin D3 + K2", "B-Complex", "Glucosamine", "Glutathione"]
      },
      {
        time: "11:00 PM",
        title: "Meal 3",
        macros: "Protein 50 g ‚Ä¢ Carbs 30 g ‚Ä¢ Fat 15 g (~455 kcal)",
        food: ["Lean protein", "Carb portion", "Veggies"],
        supps: []
      },
      {
        time: "3:00 AM",
        title: "Final Meal",
        macros: "Protein 50 g ‚Ä¢ Carbs 20 g ‚Ä¢ Fat 15 g (~385 kcal)",
        food: ["Protein + veggies", "Small carb if needed"],
        supps: ["Magnesium bisglycinate (pre-sleep)"]
      }
    ]
  },

  offday: {
    label: "Off Day",
    hours: "Recovery Day",
    targets: { kcal: 1750, p: 215, c: 120, f: 45 },
    blocks: [
      {
        time: "Wake",
        title: "Wake",
        macros: "Protein 40 g ‚Ä¢ Carbs 20 g ‚Ä¢ Fat 5 g (~285 kcal)",
        food: ["ISO100 whey (1 scoop)", "Egg whites (1 cup)", "Small fruit / berries"],
        supps: ["B-Complex", "Glucosamine", "Glutathione", "LMNT ¬Ω pack", "Vascepa 2 g", "Creatine 5 g"]
      },
      {
        time: "Meal 2",
        title: "Meal 2",
        macros: "Protein 45 g ‚Ä¢ Carbs 25 g ‚Ä¢ Fat 10 g (~380 kcal)",
        food: ["Chicken breast", "Small rice portion", "Greens"],
        supps: ["Vitamin D3 + K2"]
      },
      {
        time: "Meal 3",
        title: "Meal 3",
        macros: "Protein 45 g ‚Ä¢ Carbs 25 g ‚Ä¢ Fat 10 g (~380 kcal)",
        food: ["96/4 beef OR chicken", "Veggies", "Small carb serving"],
        supps: []
      },
      {
        time: "Meal 4",
        title: "Meal 4",
        macros: "Protein 45 g ‚Ä¢ Carbs 25 g ‚Ä¢ Fat 10 g (~380 kcal)",
        food: ["Cod or chicken", "Rice/potato (small)", "Veggies"],
        supps: []
      },
      {
        time: "Final",
        title: "Final Meal",
        macros: "Protein 40 g ‚Ä¢ Carbs 25 g ‚Ä¢ Fat 10 g (~325 kcal)",
        food: ["Lean protein", "Veggies", "Optional small carb to hit 120C"],
        supps: ["Magnesium bisglycinate", "Glycine (optional)"]
      }
    ]
  }
};

const $ = (sel)=>document.querySelector(sel);
const planRoot = $("#planRoot");
const modeSelect = $("#modeSelect");
const resetBtn = $("#resetBtn");
const shiftHours = $("#shiftHours");
const targetsText = $("#targetsText");
const todayText = $("#todayText");

function todayKey(){
  const d = new Date();
  const yyyy = d.getFullYear();
  const mm = String(d.getMonth()+1).padStart(2,"0");
  const dd = String(d.getDate()).padStart(2,"0");
  return `${yyyy}-${mm}-${dd}`;
}

function storageKey(mode){
  return `oilfieldCut:v3:${todayKey()}:${mode}`;
}

function loadState(mode){
  try{
    return JSON.parse(localStorage.getItem(storageKey(mode)) || "{}");
  }catch(e){ return {}; }
}

function saveState(mode, state){
  localStorage.setItem(storageKey(mode), JSON.stringify(state));
}

function setHeader(mode){
  const plan = PLANS[mode];
  shiftHours.textContent = plan.hours;
  const t = plan.targets;
  targetsText.textContent = `${t.kcal} kcal ‚Ä¢ ${t.p}P / ${t.c}C / ${t.f}F`;
}

function checkIcon(){
  return `<svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <path d="M20 6L9 17l-5-5" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`;
}

function render(mode){
  setHeader(mode);
  planRoot.innerHTML = "";
  const state = loadState(mode);

  const blocks = PLANS[mode].blocks;

  blocks.forEach((b, bi)=>{
    const wrap = document.createElement("div");
    wrap.className = "card block";

    const head = document.createElement("div");
    head.className = "sectionTitle";
    head.innerHTML = `üü¢ <span>${b.time} ‚Äî<br/>${b.title}</span>`;
    wrap.appendChild(head);

    const macrosH = document.createElement("div");
    macrosH.className = "h4";
    macrosH.innerHTML = `üçΩÔ∏è <span>Macros</span>`;
    wrap.appendChild(macrosH);

    const macrosLine = document.createElement("div");
    macrosLine.className = "macroLine";
    macrosLine.textContent = b.macros;
    wrap.appendChild(macrosLine);

    // Food
    const foodH = document.createElement("h3");
    foodH.style.marginTop = "18px";
    foodH.textContent = "Food";
    wrap.appendChild(foodH);

    const foodUl = document.createElement("ul");
    (b.food || []).forEach((item, ii)=>{
      const id = `b${bi}-food${ii}`;
      const li = document.createElement("li");
      const chk = document.createElement("span");
      chk.className = "check";
      chk.dataset.id = id;
      chk.dataset.checked = state[id] ? "true" : "false";
      chk.innerHTML = checkIcon();
      chk.addEventListener("click", ()=>{
        const s = loadState(mode);
        s[id] = !s[id];
        saveState(mode, s);
        chk.dataset.checked = s[id] ? "true" : "false";
      });
      li.appendChild(chk);

      const txt = document.createElement("div");
      txt.textContent = item;
      li.appendChild(txt);
      foodUl.appendChild(li);
    });
    if((b.food || []).length===0){
      const p = document.createElement("div");
      p.className = "muted";
      p.style.marginTop = "6px";
      p.textContent = "‚Äî";
      wrap.appendChild(p);
    }else{
      wrap.appendChild(foodUl);
    }

    // Supps
    const suppH = document.createElement("h3");
    suppH.style.marginTop = "18px";
    suppH.textContent = "üíä Supplements / Meds";
    wrap.appendChild(suppH);

    const suppUl = document.createElement("ul");
    (b.supps || []).forEach((item, ii)=>{
      const id = `b${bi}-supp${ii}`;
      const li = document.createElement("li");
      const chk = document.createElement("span");
      chk.className = "check";
      chk.dataset.id = id;
      chk.dataset.checked = state[id] ? "true" : "false";
      chk.innerHTML = checkIcon();
      chk.addEventListener("click", ()=>{
        const s = loadState(mode);
        s[id] = !s[id];
        saveState(mode, s);
        chk.dataset.checked = s[id] ? "true" : "false";
      });
      li.appendChild(chk);

      const txt = document.createElement("div");
      txt.textContent = item;
      li.appendChild(txt);
      suppUl.appendChild(li);
    });
    if((b.supps || []).length===0){
      const p = document.createElement("div");
      p.className = "muted";
      p.style.marginTop = "6px";
      p.textContent = "‚Äî";
      wrap.appendChild(p);
    }else{
      wrap.appendChild(suppUl);
    }

    planRoot.appendChild(wrap);
  });
}

function init(){
  todayText.textContent = todayKey();

  // Persist selected mode too
  const savedMode = localStorage.getItem("oilfieldCut:v3:selectedMode");
  if(savedMode && PLANS[savedMode]) modeSelect.value = savedMode;

  render(modeSelect.value);

  modeSelect.addEventListener("change", ()=>{
    localStorage.setItem("oilfieldCut:v3:selectedMode", modeSelect.value);
    render(modeSelect.value);
  });

  resetBtn.addEventListener("click", ()=>{
    const mode = modeSelect.value;
    localStorage.removeItem(storageKey(mode));
    render(mode);
  });

  // register service worker
  if("serviceWorker" in navigator){
    navigator.serviceWorker.register("./sw.js").catch(()=>{});
  }
}

init();
</script>
</body>
</html>
